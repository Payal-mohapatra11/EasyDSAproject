<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
     <script src="https://unpkg.com/feather-icons"></script>
      <style>
         @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Space Grotesk', sans-serif; }
    </style>
</head>
<body>
    {% include 'header.html' %}
    <div class="max-w-5xl mx-auto py-6 sm:py-10 px-3 sm:px-6">
        <h1 class="text-3xl font-bold text-center mb-8 text-pink-800">Sorting Algorithms Visualizer</h1>
        <div class="bg-green-100 rounded-xl shadow-lg p-6 mb-8">
            <div class="flex flex-col sm:flex-row sm:flex-wrap justify-center gap-3 mb-6">
                  <input type="number" id="searchValue" placeholder="Search value" class="border px-3 py-2 rounded w-40">
                 <button onclick="generateArray()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Generate Array</button>
                  <button onclick="linearSearch()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Linear Search</button>
                  <button onclick="binarySearch()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded">Binary Search</button>
                 
            </div>
   <!-- Legend -->
<div class="flex justify-center gap-6 mb-4 text-sm font-semibold">
    <span class="text-blue-500">■ Unchecked</span>
    <span class="text-yellow-500">■ Checking</span>
    <span class="text-green-500">■ Found</span>
    <span class="text-red-500">■ Not Match</span>
</div>

   <!-- Visualizer -->
<div id="arrayContainer"
     class="flex items-end justify-center gap-1 sm:gap-2 h-56 sm:h-72 md:h-80 bg-white p-2 sm:p-4 rounded shadow overflow-x-auto">
</div>

 <div id="status-message" class="text-center text-sm sm:text-base italic mt-4 px-2"></div>

                 <!-- DUMMY STEPS OUTPUT -->
        <div id="steps-output" class="bg-white p-3 sm:p-4 rounded-lg text-xs sm:text-sm font-mono text-gray-800 overflow-x-auto max-h-64"></div>

    </div>

     <div class="bg-green-100 rounded-xl shadow-lg p-6 border border-white">
      <h2 class="text-xl font-bold mb-3 text-green-900">Theory: Array Operation</h2>
      <p class="text-gray-700 mb-3">
        Arrays store elements in contiguous memory, so index-based access is direct.
      </p>
      <div class="bg-green-50 border border-green-200 rounded-lg p-4">
        <ul class="list-disc pl-5 text-gray-800">
          <li><strong>Access/Update by index:</strong> Time complexity O(1), Space complexity O(1) [Direct address calculation, so reads/writes at a known index are O(1).]</li>
          <li><strong>Search (unsorted):</strong> Time complexity O(n), Space complexity O(1)</li> [May check every element]
          <li><strong>Insert/Delete at index:</strong> Time complexity O(n) (shift elements), Space complexity typically O(1) for in-place shifting [Shift subsequent elements to maintain contiguity (make space on insert, close the gap on delete).]</li>
          <li><strong>Overall array storage:</strong> O(n) Space for n elements</li>
        </ul>
      </div>
    </div>
    

    </div>
{% include 'footer.html' %}
<script>
   let array = [];
const container = document.getElementById("arrayContainer");
const delay = 500;

/* =========================
   GENERATE ARRAY
========================= */
function generateArray(size = 10) {
    container.innerHTML = "";
    array = [];

    for (let i = 0; i < size; i++) {
        let value = Math.floor(Math.random() * 90) + 10;
        array.push(value);

        const bar = document.createElement("div");
        bar.style.height = `${value * 2}px`;
        bar.style.width = "40px";
        bar.innerText = value;

        bar.className =
            "bg-blue-400 rounded flex items-end justify-center text-xs font-bold";

        container.appendChild(bar);
    }

    document.getElementById("result").innerText = "";
}

/* =========================
   SLEEP FUNCTION
========================= */
function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

function setStatus(message, type = "info") {
    const colors = {
        info: "text-blue-700",
        success: "text-green-700",
        error: "text-red-600"
    };
    const status = document.getElementById("status-message");
    status.className = `text-center italic mt-4 ${colors[type]}`;
    status.textContent = message;
}

function logSteps(steps) {
    const stepsOutput = document.getElementById("steps-output");
    stepsOutput.innerHTML = "";
    steps.forEach(step => {
        const p = document.createElement("p");
        p.textContent = JSON.stringify(step);
        stepsOutput.appendChild(p);
    });
}



/* =========================
   LINEAR SEARCH
========================= */
    async function linearSearch() {
    let target = Number(document.getElementById("searchValue").value);
    let bars = document.querySelectorAll("#arrayContainer div");

    let foundIndex = -1;

    for (let i = 0; i < bars.length; i++) {
        bars[i].className =
            "bg-yellow-400 rounded flex items-end justify-center text-xs font-bold";
        await sleep(delay);

        if (array[i] === target) {
            bars[i].className =
                "bg-green-500 rounded flex items-end justify-center text-xs font-bold";
            foundIndex = i;
            break;   //stop loop, not function
        } else {
            bars[i].className =
                "bg-red-400 rounded flex items-end justify-center text-xs font-bold";
        }
    }


    // DUMMY STEPS + STATUS (ALWAYS EXECUTES)
    logSteps(getLinearSearchSteps(array, target));

    if (foundIndex !== -1) {
        setStatus(
            `Linear Search completed (O(n)). Element found at index ${foundIndex}`,
            "success"
        );
    } else {
        setStatus(
            "Linear Search completed (O(n)). Element not found.",
            "error"
        );
    }
}



function getLinearSearchSteps(arr, target) {
    const steps = [];

    for (let i = 0; i < arr.length; i++) {
        steps.push({
            action: "compare",
            index: i,
            value: arr[i]
        });

        if (arr[i] === target) {
            steps.push({
                action: "found",
                index: i,
                value: target
            });
            return steps;
        }
    }

    steps.push({
        action: "not_found",
        value: target
    });

    return steps;
}


/* =========================
   BINARY SEARCH
   (ARRAY MUST BE SORTED)
========================= */
async function binarySearch() {
    let target = Number(document.getElementById("searchValue").value);

    array.sort((a, b) => a - b);
    renderSortedArray();

    let bars = document.querySelectorAll("#arrayContainer div");
    let low = 0, high = array.length - 1;
    let foundIndex = -1;

    while (low <= high) {
        let mid = Math.floor((low + high) / 2);

        bars[mid].className =
            "bg-yellow-400 rounded flex items-end justify-center text-xs font-bold";
        await sleep(delay);

        if (array[mid] === target) {
            bars[mid].className =
                "bg-green-500 rounded flex items-end justify-center text-xs font-bold";
            foundIndex = mid;
            break;
        }

        if (array[mid] < target) {
            bars[mid].className =
                "bg-red-400 rounded flex items-end justify-center text-xs font-bold";
            low = mid + 1;
        } else {
            bars[mid].className =
                "bg-red-400 rounded flex items-end justify-center text-xs font-bold";
            high = mid - 1;
        }

        await sleep(delay);
    }

    // DUMMY STEPS + STATUS
    logSteps(getBinarySearchSteps(array, target));

    if (foundIndex !== -1) {
        setStatus(
            `Binary Search completed (O(log n)). Element found at index ${foundIndex}`,
            "success"
        );
    } else {
        setStatus(
            "Binary Search completed (O(log n)). Element not found.",
            "error"
        );
    }
}

function getBinarySearchSteps(arr, target) {
    const steps = [];
    let low = 0, high = arr.length - 1;

    while (low <= high) {
        let mid = Math.floor((low + high) / 2);

        steps.push({
            action: "check_mid",
            low: low,
            mid: mid,
            high: high,
            value: arr[mid]
        });

        if (arr[mid] === target) {
            steps.push({
                action: "found",
                index: mid,
                value: target
            });
            return steps;
        }

        if (arr[mid] < target) {
            steps.push({
                action: "move_right",
                new_low: mid + 1
            });
            low = mid + 1;
        } else {
            steps.push({
                action: "move_left",
                new_high: mid - 1
            });
            high = mid - 1;
        }
    }

    steps.push({
        action: "not_found",
        value: target
    });

    return steps;
}


/* =========================
   RENDER SORTED ARRAY
========================= */
function renderSortedArray() {
    container.innerHTML = "";

    array.forEach(value => {
        const bar = document.createElement("div");
        bar.style.height = `${value * 2}px`;
        bar.style.width = "40px";
        bar.innerText = value;

        bar.className =
            "bg-blue-400 rounded flex items-end justify-center text-xs font-bold";

        container.appendChild(bar);
    });
} 
</script>
    
</body>
</html>