<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Profile | EasyDSA</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <style>
    @import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap");
    body {
      font-family: "Space Grotesk", sans-serif;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

  {% include 'header.html' %}

  <!-- PROFILE CARD -->
  <section class="py-16">
    <div class="max-w-4xl mx-auto px-4">
      <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
 
        <!-- Header -->
         <div class="bg-green-600 text-white p-8 text-center">
          <div class="w-24 h-24 mx-auto rounded-full bg-white flex items-center justify-center text-indigo-600 text-3xl font-bold shadow"> 
            <div class="w-24 h-24 mx-auto rounded-full bg-white 
              flex items-center justify-center 
              text-green-500 text-4xl font-bold shadow-lg">
    {{ user.email|first|upper }}
  </div>
           <!-- {% if user.socialaccount_set.all %}
           {% with social=user.socialaccount_set.all.0 %}
           {% if social.extra_data.picture %}

        <img
             src="{{ social.extra_data.picture }}"
          alt="Google Profile"
          class="w-full h-full object-cover"
        >
    {% else %} -->
    <!-- <span class="text-3xl font-bold text-indigo-600">
           {{ profile.full_name|first|upper }} 
            {{ user.email|first|upper }}
        </span> -->
        <!-- {% endif %} 
 {% endwith %}
  {% else %}
    <span class="text-3xl font-bold text-indigo-600">
      {{ profile.full_name|first|upper }}
    </span>
  {% endif %}-->

          </div>
          <h1 class="text-2xl font-semibold mt-4">{{profile.full_name}}</h1>
          <p class="text-sm opacity-90">DSA Learner</p>
        </div>

        <!-- Personal Details -->
        <div class="p-8 space-y-6">

          <div class="flex items-center gap-4">
            <i data-feather="user" class="text-indigo-500"></i>
            <div>
              <p class="text-sm text-gray-500">Full Name</p>
              <p class="font-medium">{{profile.full_name}}</p>
            </div>
          </div>

          <div class="flex items-center gap-4">
            <i data-feather="mail" class="text-indigo-500"></i>
            <div>
              <p class="text-sm text-gray-500">Email</p>
              <p class="font-medium">{{ profile.user.email }}</p>
            </div>
          </div>

          <div class="flex items-center gap-4">
            <i data-feather="phone" class="text-indigo-500"></i>
            <div>
              <p class="text-sm text-gray-500">Phone</p>
              {% if profile.phone %}
      <!-- Phone exists -->
      <p class="font-medium">{{ profile.phone }}</p>

    {% else %}
      {% if is_google_user %}
        <!-- Google login user -->
        <p class="text-sm text-red-600">
          Phone number not added.
        </p>
      {% else %}
        <!-- Manual signup user -->
        <p class="text-sm text-red-600">
          Phone number is required.
        </p>
      {% endif %}
    {% endif %}
            </div>
          </div>

          <div class="flex items-center gap-4">
            <i data-feather="calendar" class="text-indigo-500"></i>
            <div>
              <p class="text-sm text-gray-500">Joined On</p>
              <p class="font-medium"> {{ profile.created_at|date:"d M Y" }}</p>
            </div>
          </div>

        </div>

        <!-- Footer -->
        <div class="p-6 text-right">
          <button class="px-5 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
             <a href="{% url 'logout' %}">Logout</a>  
          </button>
          <button class="px-5 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
             <a href="{% url 'edit_profile' %}">Edit Profile</a>  
          </button>
        </div>

      </div>
    </div>
  </section>

  {% include 'footer.html' %}
  <!-- Feather Icons Init -->
  <script>
    feather.replace();
  </script>

</body>
</html>
